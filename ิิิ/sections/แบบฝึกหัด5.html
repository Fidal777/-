<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>แบบทดสอบบทที่ 5 | เนื้อ (Texture)</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@200;300;400;600;800&family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
    theme: {
        extend: {
            fontFamily: { sans: ['Kanit','Poppins','sans-serif'] },
            colors: { brand:{accent:'#FBAED2'} }
        }
    }
}
</script>

<style>
body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    background: #000;
    font-family: 'Kanit', sans-serif;
    color: white;
}

/* BG Video */
#bgVideo {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.35;
    z-index: -3;
}

/* Parallax */
.parallax-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 110%;
    height: 110%;
    background-size: cover;
    background-position: center;
    z-index: -2;
    opacity: 0.25;
    pointer-events: none;
}

/* Glass box */
.glass {
    background: rgba(255,255,255,0.07);
    border: 1px solid rgba(255,255,255,0.15);
    backdrop-filter: blur(14px);
    border-radius: 20px;
}

.correct { background:rgba(0,255,0,0.15); border-color:#00f260!important; }
.wrong   { background:rgba(255,0,0,0.15); border-color:#ff3b3b!important; }
</style>
</head>

<body>

<!-- BG Video -->
<video id="bgVideo" autoplay muted loop>
    <source src="https://cdn.coverr.co/videos/coverr-dark-waves-5835/1080p.mp4" type="video/mp4">
</video>

<!-- Parallax layer -->
<div id="layer1" class="parallax-layer"
style="background-image:url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=2400&q=100');">
</div>

<script>
document.addEventListener('mousemove', e => {
    const x = (e.clientX / window.innerWidth - 0.5) * 20;
    const y = (e.clientY / window.innerHeight - 0.5) * 20;
    layer1.style.transform = `translate(${x}px, ${y}px)`;
});
</script>

<!-- ================== START PAGE ================== -->
<div class="w-full min-h-screen flex justify-center items-center px-4">
<div id="startPage"
     class="glass p-10 max-w-2xl w-full text-center animate-fadeIn">

    <h1 class="text-5xl font-bold mb-6 text-brand-accent">
        แบบทดสอบ บทที่ 5<br>“เนื้อ (Texture)”
    </h1>

    <p class="text-gray-300 mb-8 text-lg">
        แบบทดสอบเรื่องเนื้อสัมผัส 15 ข้อ พร้อมเฉลย + ตรวจคะแนนอัตโนมัติ
    </p>

    <button onclick="startQuiz()"
        class="w-full py-4 bg-brand-accent text-black font-bold rounded-xl text-xl hover:scale-105 transition">
        เริ่มทำแบบทดสอบ
    </button>
</div>
</div>

<!-- ================== QUIZ PAGE ================== -->
<div id="quizPage" class="hidden max-w-4xl mx-auto glass p-10 animate-fadeIn mt-10">
    <h1 class="text-4xl font-bold text-center mb-6 text-brand-accent">แบบทดสอบเรื่อง “เนื้อ (Texture)”</h1>
    <form id="quiz" class="space-y-8"></form>

    <button onclick="checkScore()"
        class="mt-10 w-full py-4 bg-brand-accent text-black font-bold rounded-xl text-lg hover:scale-105 transition">
        ตรวจคะแนน
    </button>

    <div id="warn" class="text-red-400 text-center mt-3"></div>
</div>

<!-- ================== RESULT PAGE ================== -->
<div id="resultPage" class="hidden glass p-10 max-w-3xl mx-auto text-center animate-fadeIn mt-10">
    <div id="answerReview" class="mt-10 space-y-4 text-left"></div>
    <h1 class="text-4xl font-bold mb-6 text-brand-accent">ผลคะแนน</h1>
    <canvas id="scoreGraph" width="400" height="260" class="mx-auto"></canvas>
    <p id="scoreText" class="text-3xl font-bold mt-6"></p>

    <button onclick="location.reload()"
        class="mt-10 w-full py-4 bg-brand-accent text-black font-bold rounded-xl text-lg hover:scale-105 transition">
        ทำใหม่อีกครั้ง
    </button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
/* ----------------- QUESTIONS ----------------- */
const questions = [
    {q:"เนื้อ (Texture) คืออะไรในงานศิลปะ?",a:["ความสว่างของสี","ความรู้สึกของผิวสัมผัส","ความลึกของเงา","รูปร่างของวัตถุ"],c:1},
    {q:"Texture แบ่งเป็นกี่ประเภทใหญ่ ๆ?",a:["2 ประเภท","3 ประเภท","4 ประเภท","5 ประเภท"],c:0},
    {q:"Texture แบบจริง (Actual Texture) คืออะไร?",a:["สัมผัสได้จริง","มองเห็นแต่สัมผัสไม่ได้","เกิดจากแสง","เกิดจากสี"],c:0},
    {q:"Texture แบบลวงตา (Implied Texture) คืออะไร?",a:["ผิวสัมผัสหยาบ","ผิวลื่น","เห็นเหมือนมีผิวแต่จับไม่ได้","จับแล้วนุ่ม"],c:2},
    {q:"ข้อใดเป็นตัวอย่างของ Actual Texture?",a:["ภาพวาดกำแพงหยาบ","พื้นผิวกำแพงปูนจริง ๆ","ภาพวาดใบไม้","ลายเส้น"],c:1},
    {q:"ลายไม้ในภาพวาดจัดเป็น Texture แบบใด?",a:["จริง","ลวงตา","แข็ง","นุ่ม"],c:1},
    {q:"Texture สามารถช่วยอะไรในงานศิลปะ?",a:["เพิ่มความลึกและความจริง","เพิ่มความมืด","ลดรายละเอียด","ทำให้วัตถุเบลอ"],c:0},
    {q:"Texture แบบหยาบให้ความรู้สึกแบบใด?",a:["อบอุ่น","แข็งแรง และดิบ","ลื่น","หรูหรา"],c:1},
    {q:"Texture แบบเรียบให้ความรู้สึกแบบใด?",a:["หยาบ","รุนแรง","สงบ เรียบร้อย","ดิบ"],c:2},
    {q:"ภาพถ่ายเมฆเป็น Texture แบบใด?",a:["จริง","ลวงตา","แข็ง","ตื้น"],c:1},
    {q:"การใช้แสงเงาช่วยสร้าง Texture ใดได้?",a:["ลวงตา","จริง","หยาบจริง","แข็ง"],c:0},
    {q:"ข้อใดคือ Texture ธรรมชาติ?",a:["ลายผ้า","ลายไม้","ลายกระดาษพิมพ์","พื้นกระเบื้อง"],c:1},
    {q:"Texture มีบทบาทสำคัญต่ออะไร?",a:["สร้างอารมณ์ภาพ","เพิ่มน้ำหนักวัตถุ","กำหนดโทนสี","ลดความคม"],c:0},
    {q:"Texture แบบนุ่มให้ความรู้สึกแบบใด?",a:["อบอุ่น ผ่อนคลาย","แข็งแรง","คม","น่ากลัว"],c:0},
    {q:"พื้นผิวโลหะมันวาวเป็น Texture แบบใด?",a:["ด้าน","หยาบ","มัน เรียบ","ลวงตา"],c:2}
];

/* Render Questions */
const quizForm = document.getElementById("quiz");

questions.forEach((item,index)=>{
    let box = document.createElement("div");
    box.className = "glass p-6";
    let ansHTML = "";

    item.a.forEach((ch,i)=>{
        ansHTML += `
        <label class='flex items-center gap-3 py-1 cursor-pointer'>
            <input type="radio" name="q${index}" value="${i}" class="accent-brand-accent">
            <span>${ch}</span>
        </label>`;
    });

    box.innerHTML =
        `<h3 class='font-bold text-lg mb-3'>${index+1}. ${item.q}</h3>${ansHTML}`;
    quizForm.appendChild(box);
});

/* Start Quiz */
function startQuiz(){
    startPage.classList.add("hidden");
    quizPage.classList.remove("hidden");
}

/* Check Score */
function checkScore(){

    for(let i=0;i<questions.length;i++){
        if(!document.querySelector(`input[name='q${i}']:checked`)){
            warn.innerHTML = `กรุณาตอบข้อที่ <span class='text-brand-accent'>${i+1}</span>`;
            return;
        }
    }

    let score = 0;
    document.querySelectorAll('#quiz > div').forEach((box,i)=>{
        const selected = document.querySelector(`input[name='q${i}']:checked`);
        if(parseInt(selected.value) === questions[i].c){
            box.classList.add("correct");
            score++;
        } else {
            box.classList.add("wrong");
        }
    });

    quizPage.classList.add("hidden");
    resultPage.classList.remove("hidden");

    scoreText.innerHTML =
        `คุณได้คะแนน <span class='text-brand-accent text-4xl'>${score}</span> / 15`;

    new Chart(scoreGraph,{
        type:'doughnut',
        data:{
            labels:['ถูก','ผิด'],
            datasets:[{
                data:[score,15-score],
                backgroundColor:['#00f260','#ff4545'],
            }]
        }
    });
}
function checkScore() {

    // ตรวจว่าตอบครบไหม
    for(let i=0;i<questions.length;i++){
        if(!document.querySelector(`input[name='q${i}']:checked`)){
            warn.innerHTML = `กรุณาตอบข้อที่ <span class='text-brand-accent'>${i+1}</span>`;
            return;
        }
    }

    let score = 0;
    let reviewHTML = "";

    document.querySelectorAll('#quiz > div').forEach((box,i)=>{

        const selected = document.querySelector(`input[name='q${i}']:checked`);
        const userAns = parseInt(selected.value);
        const correctAns = questions[i].c;

        if(userAns === correctAns){
            box.classList.add("correct");
            score++;
        } else {
            box.classList.add("wrong");
        }

        // สร้างเฉลย
        reviewHTML += `
            <div class="p-4 rounded-xl border ${
                userAns === correctAns ? "border-green-400 bg-green-800/20" : "border-red-400 bg-red-800/20"
            }">
                <p class="font-bold text-lg">ข้อ ${i+1}. ${questions[i].q}</p>
                <p class="mt-1">คุณตอบ: 
                    <span class="${userAns === correctAns ? 'text-green-300' : 'text-red-300'}">
                        ${questions[i].a[userAns]}
                    </span>
                </p>
                <p>คำตอบที่ถูกต้องคือ: 
                    <span class="text-brand-accent font-bold">
                        ${questions[i].a[correctAns]}
                    </span>
                </p>
            </div>
        `;
    });

    // ซ่อนหน้า quiz ไปหน้า result
    quizPage.classList.add("hidden");
    resultPage.classList.remove("hidden");

    // แสดงคะแนนรวม
    scoreText.innerHTML = `คุณได้คะแนน <span class='text-brand-accent text-4xl'>${score}</span> / 15`;

    // ใส่เฉลยลงหน้าใหม่
    document.getElementById("answerReview").innerHTML = reviewHTML;

    // วงกลมคะแนน
    new Chart(scoreGraph,{
        type:'doughnut',
        data:{
            labels:['ถูก','ผิด'],
            datasets:[{
                data:[score,15-score],
                backgroundColor:['#00f260','#ff4545'],
            }]
        }
    });
}
</script>

</body>
</html>
